<div class="parent">

  <div class="container" [class.active]="isRegisterMode()">
    
    <div class="form-box login" *ngIf="!isVerifyMode()">
      
      @if (!isForgotPassword() && !isResetMode()) {
        <form [formGroup]='loginForm' (ngSubmit)="login()">
          <h1>Login</h1>
          <div class="input-box">
            <input type="text" formControlName="username" placeholder="Username" required>
            <i class='bx bxs-user'></i>
          </div>
          <div class="input-box">
            <input type="password" formControlName="password" placeholder="Password" required>
            <i class='bx bxs-lock-alt'></i>
          </div>
          
          <div class="forgot-link">
            <a href="javascript:void(0)" (click)="toggleForgotPassword()">Forgot Password?</a>
          </div>
          
          <button type="submit" class="btn">Login</button>
          
          <div class="separator">
  <span>or login with</span>
</div>

<div class="social-icons">
  <a href="javascript:void(0)" (click)="socialLogin('google')" class="social-btn google" title="Login with Google">
    <i class='b bi-google'></i>
  </a>
  </div>
    <div class="signature">
    - Gautam
  </div>
        </form>
      }

      @if (isForgotPassword()) {
        <form (ngSubmit)="sendResetLink()">
          <h1>Reset Password</h1>
          <p style="font-size: 13px; margin-bottom: 20px;">Enter your email to receive an OTP.</p>
          
          <div class="input-box">
            <input type="email" [(ngModel)]="forgotEmail" name="forgotEmail" placeholder="Enter your email" required>
            <i class='bx bxs-envelope'></i>
          </div>

          <button type="submit" class="btn">Send OTP</button>
          
          <div class="forgot-link" style="text-align: center; margin-top: 15px;">
            <a href="javascript:void(0)" (click)="toggleForgotPassword()">Back to Login</a>
          </div>
        </form>
      }

      @if (isResetMode()) {
        <form (ngSubmit)="submitResetPassword()">
          <h1>Set New Password</h1>
          <p style="font-size: 13px; margin-bottom: 15px;">Enter the OTP sent to {{ forgotEmail }}</p>
          
          <div class="input-box">
            <input type="text" [(ngModel)]="otpCode" name="otp" placeholder="Enter OTP Code" required>
            <i class='bx bxs-key'></i>
          </div>

          <div class="input-box">
            <input type="password" [(ngModel)]="newPassword" name="newPass" placeholder="New Password" required>
            <i class='bx bxs-lock-alt'></i>
          </div>

          <button type="submit" class="btn">Update Password</button>
          
          <div class="forgot-link" style="text-align: center; margin-top: 15px;">
            <a href="javascript:void(0)" (click)="cancelReset()">Cancel</a>
          </div>
        </form>
      }

    </div>

    <div class="form-box register" *ngIf="!isVerifyMode()">
      <form (ngSubmit)="register()">
        <h1>Registration</h1>
        <div class="input-box">
          <input type="text" name="username" [(ngModel)]="customerObj.username" placeholder="Username" required>
          <i class='bx bxs-user'></i>
        </div>
        <div class="input-box">
          <input type="email" name="emailId" [(ngModel)]="customerObj.emailId" placeholder="Email" required>
          <i class='bx bxs-envelope'></i>
        </div>
        <div class="input-box">
          <input type="text" name="fullName" [(ngModel)]="customerObj.fullName" placeholder="Full name" required>
          <i class='bx bxs-id-card'></i>
        </div>
        <div class="input-box">
          <select name="role" [(ngModel)]="customerObj.role" required>
            <option value="" disabled selected>Select Role</option>
            <option value="Admin" style="color: #000;">Admin</option>
            <option value="Banker" style="color: #000;">Banker</option>
            <option value="Customer" style="color: #000;">Customer</option>
          </select>
          <i class='bx bxs-briefcase' style="position: absolute; right: 20px;"></i>
        </div>
        <div class="input-box">
          <input type="password" name="password" [(ngModel)]="customerObj.password" placeholder="Password" required>
          <i class='bx bxs-lock-alt'></i>
        </div>
        <button type="submit" class="btn">Register</button>
      </form>
    </div>

  <div class="form-box verify" *ngIf="isVerifyMode()">
      <form (ngSubmit)="verifyOtp()">
        <h1>Verify Email</h1>
        <p style="margin-bottom: 20px;">Enter the OTP sent to {{ verificationEmail }}</p>
        
        <div class="input-box">
          <input type="text" name="otp" [(ngModel)]="otpCode" placeholder="Enter OTP Code" required>
          <i class='bx bxs-key'></i>
        </div>

        <button type="submit" class="btn">Verify Account</button>
        
        <div class="forgot-link" style="text-align: center; margin-top: 15px;">
           <a href="javascript:void(0)" (click)="cancelVerify()">Wrong Email? Register Again</a>
        </div>
      </form>
    </div>

    <div class="toggle-box" *ngIf="!isVerifyMode()">
      <div class="toggle-panel toggle-left">
        <h1>Hello, Welcome!</h1>
        <p>Don't have an account?</p>
        <button class="btn register-btn" (click)="changeView()">Register</button>
      </div>
      <div class="toggle-panel toggle-right">
        <h1>Welcome Back!</h1>
        <p>Already have an account?</p>
        <button class="btn login-btn" (click)="changeView()">Login</button>
      </div>
      
    </div>
    
    
  </div> 
  
</div>